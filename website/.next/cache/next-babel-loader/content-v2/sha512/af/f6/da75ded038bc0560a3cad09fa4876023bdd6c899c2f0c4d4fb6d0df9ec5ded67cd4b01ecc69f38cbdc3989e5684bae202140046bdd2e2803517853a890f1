{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/sunfei/Downloads/website/src/components/algolia-search.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { SearchIcon } from \"@chakra-ui/icons\";\nimport { chakra, HStack, Kbd, Portal, Text, useColorModeValue, VisuallyHidden } from \"@chakra-ui/react\";\nimport { DocSearchModal, useDocSearchKeyboardEvents } from \"@docsearch/react\";\nimport Head from \"next/head\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport * as React from \"react\";\nimport SearchStyle from \"./search.styles\";\n\nconst santize = str => {\n  return str === null || str === void 0 ? void 0 : str.split(\" \").filter(t => !t.startsWith(\".css\") && t !== \"…\").join(\" \");\n};\n\nconst ACTION_KEY_DEFAULT = [\"Ctrl\", \"Control\"];\nconst ACTION_KEY_APPLE = [\"⌘\", \"Command\"];\n\nfunction Hit(props) {\n  const {\n    hit,\n    children\n  } = props;\n  return /*#__PURE__*/_jsxDEV(Link, {\n    href: hit.url,\n    passHref: true,\n    children: /*#__PURE__*/_jsxDEV(\"a\", {\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 5\n  }, this);\n}\n\nexport const SearchButton = /*#__PURE__*/React.forwardRef(function SearchButton(props, ref) {\n  const [actionKey, setActionKey] = React.useState(ACTION_KEY_APPLE);\n  React.useEffect(() => {\n    if (typeof navigator === \"undefined\") return;\n    const isMac = /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);\n\n    if (!isMac) {\n      setActionKey(ACTION_KEY_DEFAULT);\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(chakra.button, _objectSpread(_objectSpread({\n    flex: \"1\",\n    type: \"button\",\n    role: \"search\",\n    mx: \"6\",\n    ref: ref,\n    lineHeight: \"1.2\",\n    w: \"100%\",\n    bg: useColorModeValue(\"white\", \"gray.700\"),\n    whiteSpace: \"nowrap\",\n    display: {\n      base: \"none\",\n      sm: \"flex\"\n    },\n    alignItems: \"center\",\n    color: \"gray.400\",\n    py: \"3\",\n    px: \"4\",\n    outline: \"0\",\n    _focus: {\n      shadow: \"outline\"\n    },\n    shadow: \"base\",\n    rounded: \"md\"\n  }, props), {}, {\n    children: [/*#__PURE__*/_jsxDEV(SearchIcon, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(HStack, {\n      w: \"full\",\n      ml: \"3\",\n      spacing: \"4px\",\n      children: [/*#__PURE__*/_jsxDEV(Text, {\n        textAlign: \"left\",\n        flex: \"1\",\n        children: \"Search the docs\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(HStack, {\n        spacing: \"4px\",\n        children: [/*#__PURE__*/_jsxDEV(VisuallyHidden, {\n          children: \"Press \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Kbd, {\n          color: \"gray.500\",\n          rounded: \"2px\",\n          children: /*#__PURE__*/_jsxDEV(chakra.div, {\n            as: \"abbr\",\n            title: actionKey[1],\n            textDecoration: \"none !important\",\n            children: ACTION_KEY_APPLE[0]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(VisuallyHidden, {\n          children: \" and \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Kbd, {\n          color: \"gray.500\",\n          rounded: \"2px\",\n          children: \"K\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(VisuallyHidden, {\n          children: \" to search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)]\n  }), void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n});\n\nfunction AlgoliaSearch() {\n  const router = useRouter();\n  const [isOpen, setIsOpen] = React.useState(false);\n  const searchButtonRef = React.useRef();\n  const [initialQuery, setInitialQuery] = React.useState(null);\n  const onOpen = React.useCallback(() => {\n    setIsOpen(true);\n  }, [setIsOpen]);\n  const onClose = React.useCallback(() => {\n    setIsOpen(false);\n  }, [setIsOpen]);\n  const onInput = React.useCallback(e => {\n    setIsOpen(true);\n    setInitialQuery(e.key);\n  }, [setIsOpen, setInitialQuery]);\n  useDocSearchKeyboardEvents({\n    isOpen,\n    onOpen,\n    onClose,\n    onInput,\n    searchButtonRef\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: /*#__PURE__*/_jsxDEV(\"link\", {\n        rel: \"preconnect\",\n        href: \"https://BH4D9OD16A-dsn.algolia.net\",\n        crossOrigin: \"true\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SearchStyle, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SearchButton, {\n      onClick: onOpen,\n      ref: searchButtonRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this), isOpen && /*#__PURE__*/_jsxDEV(Portal, {\n      children: /*#__PURE__*/_jsxDEV(DocSearchModal, {\n        placeholder: \"Search the docs\",\n        initialQuery: initialQuery,\n        initialScrollY: window.scrollY,\n        onClose: onClose,\n        indexName: \"chakra-ui\",\n        apiKey: \"df1dcc41f7b8e5d68e73dd56d1e19701\",\n        appId: \"BH4D9OD16A\" //@ts-expect-error\n        ,\n        navigator: {\n          navigate({\n            suggestionUrl\n          }) {\n            setIsOpen(false);\n            router.push(suggestionUrl);\n          }\n\n        },\n        hitComponent: Hit,\n        transformItems: items => {\n          return items.filter(item => {\n            var _item$_snippetResult, _item$_snippetResult$, _item$_snippetResult$2, _item$_snippetResult$3;\n\n            console.log((_item$_snippetResult = item._snippetResult) === null || _item$_snippetResult === void 0 ? void 0 : (_item$_snippetResult$ = _item$_snippetResult.hierarchy) === null || _item$_snippetResult$ === void 0 ? void 0 : _item$_snippetResult$.lvl1.value);\n            const lvl1 = item.hierarchy.lvl1;\n            return item._snippetResult != null && !((_item$_snippetResult$2 = item._snippetResult.content) !== null && _item$_snippetResult$2 !== void 0 && _item$_snippetResult$2.value.includes(\".css\")) && !((_item$_snippetResult$3 = item._snippetResult.hierarchy) !== null && _item$_snippetResult$3 !== void 0 && _item$_snippetResult$3.lvl1.value.includes(\".css\"));\n          }).map(item => {\n            var _item$_snippetResult2, _item$_snippetResult3, _item$_snippetResult4;\n\n            const a = document.createElement(\"a\");\n            a.href = item.url;\n            const hash = a.hash === \"#content-wrapper\" ? \"\" : a.hash; // patch snippet result by removing `.css-` values\n\n            if ((_item$_snippetResult2 = item._snippetResult) !== null && _item$_snippetResult2 !== void 0 && (_item$_snippetResult3 = _item$_snippetResult2.hierarchy) !== null && _item$_snippetResult3 !== void 0 && (_item$_snippetResult4 = _item$_snippetResult3.lvl1) !== null && _item$_snippetResult4 !== void 0 && _item$_snippetResult4.value) {\n              item._snippetResult.hierarchy.lvl1.value = santize(item._snippetResult.hierarchy.lvl1.value);\n            }\n\n            item.url = `${a.pathname}${hash}`;\n            return item;\n          });\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\nexport default AlgoliaSearch;","map":{"version":3,"sources":["/Users/sunfei/Downloads/website/src/components/algolia-search.tsx"],"names":["SearchIcon","chakra","HStack","Kbd","Portal","Text","useColorModeValue","VisuallyHidden","DocSearchModal","useDocSearchKeyboardEvents","Head","Link","useRouter","React","SearchStyle","santize","str","split","filter","t","startsWith","join","ACTION_KEY_DEFAULT","ACTION_KEY_APPLE","Hit","props","hit","children","url","SearchButton","forwardRef","ref","actionKey","setActionKey","useState","useEffect","navigator","isMac","test","platform","base","sm","shadow","AlgoliaSearch","router","isOpen","setIsOpen","searchButtonRef","useRef","initialQuery","setInitialQuery","onOpen","useCallback","onClose","onInput","e","key","window","scrollY","navigate","suggestionUrl","push","items","item","console","log","_snippetResult","hierarchy","lvl1","value","content","includes","map","a","document","createElement","href","hash","pathname"],"mappings":"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","sourcesContent":["import { SearchIcon } from \"@chakra-ui/icons\"\nimport {\n  chakra,\n  HStack,\n  HTMLChakraProps,\n  Kbd,\n  Portal,\n  Text,\n  useColorModeValue,\n  VisuallyHidden,\n} from \"@chakra-ui/react\"\nimport { DocSearchModal, useDocSearchKeyboardEvents } from \"@docsearch/react\"\nimport Head from \"next/head\"\nimport Link from \"next/link\"\nimport { useRouter } from \"next/router\"\nimport * as React from \"react\"\nimport SearchStyle from \"./search.styles\"\n\nconst santize = (str: string | null) => {\n  return str\n    ?.split(\" \")\n    .filter((t) => !t.startsWith(\".css\") && t !== \"…\")\n    .join(\" \")\n}\n\nconst ACTION_KEY_DEFAULT = [\"Ctrl\", \"Control\"]\nconst ACTION_KEY_APPLE = [\"⌘\", \"Command\"]\n\nfunction Hit(props: any) {\n  const { hit, children } = props\n  return (\n    <Link href={hit.url} passHref>\n      <a>{children}</a>\n    </Link>\n  )\n}\n\nexport const SearchButton = React.forwardRef(function SearchButton(\n  props: HTMLChakraProps<\"button\">,\n  ref: React.Ref<HTMLButtonElement>,\n) {\n  const [actionKey, setActionKey] = React.useState<string[]>(ACTION_KEY_APPLE)\n  React.useEffect(() => {\n    if (typeof navigator === \"undefined\") return\n    const isMac = /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)\n    if (!isMac) {\n      setActionKey(ACTION_KEY_DEFAULT)\n    }\n  }, [])\n\n  return (\n    <chakra.button\n      flex=\"1\"\n      type=\"button\"\n      role=\"search\"\n      mx=\"6\"\n      ref={ref}\n      lineHeight=\"1.2\"\n      w=\"100%\"\n      bg={useColorModeValue(\"white\", \"gray.700\")}\n      whiteSpace=\"nowrap\"\n      display={{ base: \"none\", sm: \"flex\" }}\n      alignItems=\"center\"\n      color=\"gray.400\"\n      py=\"3\"\n      px=\"4\"\n      outline=\"0\"\n      _focus={{ shadow: \"outline\" }}\n      shadow=\"base\"\n      rounded=\"md\"\n      {...props}\n    >\n      <SearchIcon />\n      <HStack w=\"full\" ml=\"3\" spacing=\"4px\">\n        <Text textAlign=\"left\" flex=\"1\">\n          Search the docs\n        </Text>\n        <HStack spacing=\"4px\">\n          <VisuallyHidden>Press </VisuallyHidden>\n          <Kbd color=\"gray.500\" rounded=\"2px\">\n            <chakra.div\n              as=\"abbr\"\n              title={actionKey[1]}\n              textDecoration=\"none !important\"\n            >\n              {ACTION_KEY_APPLE[0]}\n            </chakra.div>\n          </Kbd>\n          <VisuallyHidden> and </VisuallyHidden>\n          <Kbd color=\"gray.500\" rounded=\"2px\">\n            K\n          </Kbd>\n          <VisuallyHidden> to search</VisuallyHidden>\n        </HStack>\n      </HStack>\n    </chakra.button>\n  )\n})\n\nfunction AlgoliaSearch() {\n  const router = useRouter()\n  const [isOpen, setIsOpen] = React.useState(false)\n  const searchButtonRef = React.useRef()\n  const [initialQuery, setInitialQuery] = React.useState(null)\n\n  const onOpen = React.useCallback(() => {\n    setIsOpen(true)\n  }, [setIsOpen])\n\n  const onClose = React.useCallback(() => {\n    setIsOpen(false)\n  }, [setIsOpen])\n\n  const onInput = React.useCallback(\n    (e) => {\n      setIsOpen(true)\n      setInitialQuery(e.key)\n    },\n    [setIsOpen, setInitialQuery],\n  )\n\n  useDocSearchKeyboardEvents({\n    isOpen,\n    onOpen,\n    onClose,\n    onInput,\n    searchButtonRef,\n  })\n\n  return (\n    <>\n      <Head>\n        <link\n          rel=\"preconnect\"\n          href=\"https://BH4D9OD16A-dsn.algolia.net\"\n          crossOrigin=\"true\"\n        />\n      </Head>\n      <SearchStyle />\n      <SearchButton onClick={onOpen} ref={searchButtonRef} />\n      {isOpen && (\n        <Portal>\n          <DocSearchModal\n            placeholder=\"Search the docs\"\n            initialQuery={initialQuery}\n            initialScrollY={window.scrollY}\n            onClose={onClose}\n            indexName=\"chakra-ui\"\n            apiKey=\"df1dcc41f7b8e5d68e73dd56d1e19701\"\n            appId=\"BH4D9OD16A\"\n            //@ts-expect-error\n            navigator={{\n              navigate({ suggestionUrl }) {\n                setIsOpen(false)\n                router.push(suggestionUrl)\n              },\n            }}\n            hitComponent={Hit}\n            transformItems={(items) => {\n              return items\n                .filter((item) => {\n                  console.log(item._snippetResult?.hierarchy?.lvl1.value)\n                  const lvl1 = item.hierarchy.lvl1\n                  return (\n                    item._snippetResult != null &&\n                    !item._snippetResult.content?.value.includes(\".css\") &&\n                    !item._snippetResult.hierarchy?.lvl1.value.includes(\".css\")\n                  )\n                })\n                .map((item) => {\n                  const a = document.createElement(\"a\")\n                  a.href = item.url\n                  const hash = a.hash === \"#content-wrapper\" ? \"\" : a.hash\n\n                  // patch snippet result by removing `.css-` values\n                  if (item._snippetResult?.hierarchy?.lvl1?.value) {\n                    item._snippetResult.hierarchy.lvl1.value = santize(\n                      item._snippetResult.hierarchy.lvl1.value,\n                    )\n                  }\n\n                  item.url = `${a.pathname}${hash}`\n                  return item\n                })\n            }}\n          />\n        </Portal>\n      )}\n    </>\n  )\n}\n\nexport default AlgoliaSearch\n"]},"metadata":{},"sourceType":"module"}